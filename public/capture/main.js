var P=Object.defineProperty;var O=(n,t,e)=>t in n?P(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>O(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();const $="indexed-db";class q{constructor({dbName:t=$,storeName:e,uniqueKey:r,debug:i=!1,version:a=1}){o(this,"isDBReady",!1);o(this,"version");o(this,"dbName");o(this,"storeName");o(this,"key");o(this,"debug");this.version=a,this.isDBReady=!1,this.dbName=t,this.storeName=e,this.key=r,this.debug=i,this.init()}async init(){await this.handleInitDB()}async handleInitDB(){const e=await(async()=>new Promise((r,i)=>{const a=indexedDB.open(this.dbName,this.version);a.onupgradeneeded=()=>{const s=a.result;s.objectStoreNames.contains(this.storeName)||(this.debug&&console.log("Creating users store"),s.createObjectStore(this.storeName,{keyPath:this.key}))},a.onsuccess=()=>{const s=a.result;this.version=s.version,r(s)},a.onerror=()=>{i(a.error)}}))();this.isDBReady=!!e}addData(t){return(async()=>new Promise(r=>{const i=indexedDB.open(this.dbName,this.version);i.onsuccess=()=>{this.debug&&console.log("request.onsuccess - addData",t),i.result.transaction(this.storeName,"readwrite").objectStore(this.storeName).add(t),r(t)},i.onerror=()=>{var s;const a=(s=i.error)==null?void 0:s.message;r(a||"Unknown error")}}))()}deleteData(t){return(async()=>new Promise(r=>{const i=indexedDB.open(this.dbName,this.version);i.onsuccess=()=>{this.debug&&console.log("request.onsuccess - deleteData",t);const d=i.result.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);d.onsuccess=()=>{r(!0)},d.onerror=()=>{r(!1)}}}))()}updateData(t,e){return(async()=>new Promise(i=>{const a=indexedDB.open(this.dbName,this.version);a.onsuccess=()=>{this.debug&&console.log("request.onsuccess - updateData",t);const d=a.result.transaction(this.storeName,"readwrite").objectStore(this.storeName),b=d.get(t);b.onsuccess=()=>{const p={...b.result,...e};d.put(p),i(p)},b.onerror=()=>{i(null)}}}))()}getSingleItem(t){return(async()=>new Promise(r=>{const i=indexedDB.open(this.dbName,this.version);i.onsuccess=()=>{this.debug&&console.log("request.onsuccess - getSingleData");const a=i.result;if(!a)return null;const d=a.transaction(this.storeName,"readonly").objectStore(this.storeName).get(t);d.onsuccess=()=>{r(d.result)}}}))()}getStoreData(){return new Promise(e=>{const r=indexedDB.open(this.dbName,this.version);r.onsuccess=()=>{this.debug&&console.log("request.onsuccess - getAllData");const l=r.result.transaction(this.storeName,"readonly").objectStore(this.storeName).getAll();l.onsuccess=()=>{e(l.result)}}})}}const _='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>',R='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"></path></svg>',A='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"></path></svg>',V='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"></path></svg>',z='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"></path></svg>';function c(n,t,e=!1){var i,a,s;let r=document.createElement(n);if(t&&Object.assign(r,t),typeof e=="string")(i=document.querySelector(e))==null||i.appendChild(r);else if(e===!0)(a=document.querySelector("body"))==null||a.appendChild(r);else if(typeof e=="object"){const l=e;(s=l.appendChild)==null||s.call(l,r)}return r}const w=c("div",{className:"inspector-capture-container",id:"capture-container"}),E=c("div",{className:`inspector-ui-card capture-sidebar 
  max-h-[calc(100vh-200px)] 
  shadow-lg card bg-base-300 
  fixed min-w-[300px] 
  max-w-[300px] min-h-[50px] z-[9999] left-0 top-0 rounded-md border border-[var(--inspector-border-color,gray)]`},w),y=c("div",{className:"inspector-ui-container-header bg-[var(--inpector-card-bg)] rounded-t p-3 flex justify-between items-center border-b border-[var(--inspector-border-color,gray)]"},E);c("span",{className:"capture-sidebar-header-title text-[var(--inpector-sidebar-header-title-color)] text-[20px] font-semibold",innerText:"Walkme Capture"},y);const f=c("div",{className:"inspector-ui-container p-3"},E),Y=c("div",{className:"h-10 items-center justify-center rounded-md bg-[var(--inspector-list-bg)] p-1 text-black dark:text-white grid w-full grid-cols-2 bg-[#f2f2f2] dark:bg-[var(--inspector-list-bg)] mb-2",role:"tablist",ariaOrientation:"horizontal",tabIndex:0},f),K=n=>c("button",{className:"btn btn-sm btn-square !cursor-grab border-[var(--inspector-border-color,gray)] hover:border-[var(--inspector-border-color,gray)]",innerHTML:_,title:"Click and drag",draggable:!0},n),X=n=>c("button",{className:"btn btn-sm btn-outline !ml-auto mr-2  btn-square border-[var(--inspector-border-color,gray)] hover:border-[var(--inspector-border-color,gray)]",title:"Collapse"},n),C=c("div",{className:"saved-sidebar p-3 border border-[var(--inspector-border-color)] rounded-md "},f),F=c("ul",{className:"capture-sidebar-content overscroll-contain menu bg-base-200 rounded max-h-[calc(100vh-456px)] overflow-y-auto block m-3 min-h-[50px]"},C),G=n=>c("li",{className:"saved-item",innerHTML:`<a><h6 class="text-lg line-clamp-1 ">${n.title}</h6></a>`},F),k=c("div",{className:"card-content p-3 border border-[var(--inspector-border-color)] rounded-md "},f),W=c("input",{className:"capture-sidebar-header-title editableInput line-clamp-1 text-center text-[var(--inpector-sidebar-header-title-color)] text-[20px] font-semibold mb-3"},k),Z=c("ul",{className:"capture-sidebar-content overscroll-contain menu bg-base-200 rounded max-h-[calc(100vh-456px)] overflow-y-auto block min-h-[50px]"},k),J=(n,t,e=!1)=>c("li",{className:"capture-sidebar-item relative !my-[9px]",innerHTML:`
      <a class="block">
      <h6 class="text-lg line-clamp-1">${n}</h6>
      <p class="text-xs line-clamp-2 text-gray-500">${t}</p>
      <p class="text-center absolute -bottom-[18px] left-0 right-0 flex items-center justify-center z-[2] text-gray-300  step-arrow">${R}</p>
      </a>`},e),M=c("div",{className:"card-actions justify-end mt-4"},k),u=({innerText:n,className:t="btn-neutral",container:e=!1,...r})=>c("button",{className:`btn ${t} btn-sm`,innerText:n,...r},e),m=({elementType:n="input",type:t,placeholder:e,className:r="",container:i=!1,required:a=!1,label:s="",...l})=>{const d=c("label",{className:"form-control w-full",innerHTML:` 
      <div class="label">
        <span class="label-text">${s}${a?"*":""}</span>
      </div>`},i),b=c(n,{className:`inspector-input ${n==="input"?"input input-bordered w-full ":"textarea textarea-bordered w-full "} ${r}`,...n==="input"?{type:t}:{rows:3},placeholder:e,required:a,...l},d);return{inputLabel:d,input:b}},Q=u({innerText:"Start New",container:M,className:"btn-success"}),tt=u({innerText:"Save",container:M,className:"mr-auto "}),U=c("dialog",{className:"modal",id:"capture-modal"},f),j=c("form",{className:"modal-box",id:"capture-dialog-card",onsubmit:n=>n.preventDefault()},U),et=c("div",{className:"capture-dialog-container space-y-4"},j),rt=c("div",{className:"capture-dialog-container modal-action"},j),v={_id:"",title:"",learned:!1,steps:[],url:""};class ot{constructor(t,e,r=()=>{}){o(this,"ui");o(this,"container");o(this,"modal");o(this,"startButton");o(this,"stepData",v);o(this,"modalFooterContainer");o(this,"started",!1);o(this,"modalContentContainer");o(this,"saveButton",tt);o(this,"sidebarUl",Z);o(this,"resumeButton",u({innerText:"Resume",type:"button"}));o(this,"listTitle",W);o(this,"cardActions",M);o(this,"paused",!1);o(this,"name");o(this,"onContainerClick");this.ui=t,this.container=k,this.modal=U,this.startButton=Q,this.modalContentContainer=et,this.modalFooterContainer=rt,this.name=e,this.onContainerClick=r,this.init()}init(){this.initButtons(),this.initInspector(),this.container.onclick=()=>{this.onContainerClick(this.container,this.name)}}initInspector(){this.ui.inspector.onElementClick=(t,e)=>{const r=this.ui.inspector.elements.targetElement;w.contains(r)||e.success&&this.openCaptureDialog(e.selector)}}handleOpenEditModal(t){this.openCaptureDialog(t.target,t),this.saveButton.disabled=!1}initButtons(){this.saveButton.disabled=!0,this.resumeButton.disabled=!0,this.startButton.onclick=()=>{this.listTitle.value="",this.resumeButton.disabled=!0,this.saveButton.disabled=!0,this.stepData=v,this.sidebarUl.innerHTML="",this.openNameInputDialog()},this.saveButton.onclick=()=>{this.save()},this.cardActions.appendChild(this.resumeButton),this.resumeButton.onclick=()=>{this.resume()},this.listTitle.oninput=t=>{const e=this.getInputValue(t);this.stepData.title=e;const r=e.length===0||!this.stepData.steps||this.stepData.steps.length===0;this.saveButton.disabled=r}}openNameInputDialog(){var b;this.clearModal();const{input:t,inputLabel:e}=m({placeholder:"Enter Flow Name",type:"text",label:"Flow Name",required:!0});this.stepData.url=((b=window==null?void 0:window.location)==null?void 0:b.href)||"",this.stepData._id=`${this.stepData._id||Date.now()}`;const{input:r,inputLabel:i}=m({elementType:"textarea",placeholder:"Enter Flow Description",label:"Flow Description",type:"text"}),{input:a,inputLabel:s}=m({placeholder:"URL where the flow will execute",label:"Flow URL",type:"text",className:"disabled",disabled:!0,required:!0,value:this.stepData.url}),l=u({innerText:"Start",className:"btn-success",type:"submit"}),d=u({innerText:"Cancel",className:"btn-error",type:"button"});l.onclick=()=>{var p,g;!this.stepData.title||((p=this.stepData.title)==null?void 0:p.length)===0||((g=this.stepData.url)==null?void 0:g.length)===0||(this.started=!0,this.closeModal(),this.startButton.disabled=!0,this.startCapturing())},d.onclick=()=>{this.started=!1,this.closeModal()},t.oninput=p=>{this.stepData.title=this.getInputValue(p),this.listTitle.value=this.stepData.title},r.oninput=p=>{this.stepData.description=this.getInputValue(p)},a.oninput=p=>{this.stepData.url=this.getInputValue(p)},this.modalContentContainer.append(s,e,i),this.modalFooterContainer.append(d,l),this.modal.showModal()}openCaptureDialog(t,e){var S;this.resumeButton.innerText="Resume",this.clearModal(),this.pause();let r={title:(e==null?void 0:e.title)??"",description:(e==null?void 0:e.description)??"",target:t||"",_id:(e==null?void 0:e._id)??`${Date.now()}`};const{input:i,inputLabel:a}=m({placeholder:"Enter Step Name",type:"text",label:"Step Name",required:!0,value:(e==null?void 0:e.title)||""}),{input:s,inputLabel:l}=m({elementType:"textarea",placeholder:"Enter Step Description",label:"Step Description",type:"text",value:(e==null?void 0:e.description)||""}),{input:d,inputLabel:b}=m({placeholder:"Step Target",label:"Step Target",type:"text",className:"disabled",disabled:!0,required:!0,value:t||""}),p=u({innerText:"Pause",className:"btn-error mr-auto",type:"button"}),g=u({innerText:"Next",className:"btn-success btn-outline",type:"submit"}),I=u({innerText:"Finish",className:"btn-success",type:"button"}),N=u({innerText:"Re-Capture",className:"btn-error  btn-outline",type:"button"});if(i.oninput=h=>{r.title=this.getInputValue(h)},s.oninput=h=>{r.description=this.getInputValue(h)},d.oninput=h=>{r.target=this.getInputValue(h)},N.onclick=()=>{this.resume(),this.clearModal(),this.closeModal()},g.onclick=()=>{var h;!r.title||((h=r.title)==null?void 0:h.length)===0||(this.stepData.steps=this.stepData.steps||[],this.stepData.steps.push(r),this.resume(),this.clearModal(),this.closeModal(),this.addListItem(r))},p.onclick=()=>{this.pause(),this.resumeButton.disabled=!1},I.onclick=()=>{var h;r.title&&((h=r.title)==null?void 0:h.length)>0&&(this.stepData.steps=this.stepData.steps||[],this.stepData.steps.push(r),this.addListItem(r)),this.pause(),this.startButton.disabled=!1,this.resumeButton.disabled=!1},e){const h=u({innerText:"Update",className:"btn-success",type:"button"}),B=u({innerText:"Cancel",className:"btn-error ml-auto",type:"button"});B.onclick=()=>{this.closeModal(),this.clearModal()},h.onclick=()=>{var L;!r.title||((L=r.title)==null?void 0:L.length)===0||(this.closeModal(),this.clearModal(),this.updateStepContent(r))},this.modalFooterContainer.append(B,h)}else this.stepData.steps&&((S=this.stepData.steps)==null?void 0:S.length)>0&&(this.modalFooterContainer.append(I),this.saveButton.disabled=!1),this.modalFooterContainer.append(p),this.modalFooterContainer.append(N,g);this.modalContentContainer.append(b,a,l),this.modal.showModal()}updateStepContent(t){var r;const e=(r=this.stepData.steps)==null?void 0:r.findIndex(i=>i._id===t._id);e===void 0||e===-1||!this.stepData||!this.stepData.steps||!this.stepData.steps[e]||(this.stepData.steps[e]=t,this.renderStepDataList(this.stepData))}addListItem(t){const e=J(t.title,t.description||"",this.sidebarUl);c("button",{className:"btn btn-sm btn-error btn-outline !text-[var(--error)] btn-square border-[var(--inspector-border-color,gray)] hover:border-[var(--inspector-border-color,gray)]",innerHTML:A,title:"Delete Step",onclick:r=>{var i;r.preventDefault(),r.stopPropagation(),this.saveButton.disabled=!1,this.removeItemFromStepData((i=this.stepData.steps)==null?void 0:i.findIndex(a=>a._id===t._id),e)}},e),e.onclick=()=>{this.handleOpenEditModal(t)}}renderStepDataList(t){!t||t.steps.length===0||(this.sidebarUl.innerHTML="",this.listTitle.value=t.title,t.steps.forEach(e=>{this.addListItem(e)}),this.stepData=t,this.resumeButton.disabled=!1)}removeItemFromStepData(t,e){var r,i;t===void 0||t===-1||(this.sidebarUl.removeChild(e),(r=this.stepData.steps)==null||r.splice(t,1),((i=this.stepData.steps)==null?void 0:i.length)===0&&(this.saveButton.disabled=!0,this.stepData=v,this.listTitle.value="",this.pause()))}pause(){this.closeModal(),this.clearModal(),this.ui.inspector.pause(),this.paused=!0,this.resumeButton.disabled=!1}resume(){this.resumeButton.disabled=!0,this.paused=!1,this.ui.inspector.resume()}startCapturing(){this.started=!0,this.ui.inspector.startCapturing()}stopCapturing(){this.ui.inspector.stopCapturing(),this.closeModal(),this.clearModal(),this.startButton.disabled=!1}clearModal(){this.modalContentContainer.innerHTML="",this.modalFooterContainer.innerHTML=""}closeModal(){this.modal.close(),this.clearModal()}getInputValue(t){const e=t.target;return e&&e.value||""}async save(){if(this.clearModal(),this.closeModal(),this.stopCapturing(),!this.ui.indexedDb.isDBReady){alert("Database is not ready yet. Please try again later.");return}try{if(!this.stepData._id){alert("Something went wrong. Please try again later.");return}await this.ui.indexedDb.getSingleItem(this.stepData._id)?await this.ui.indexedDb.updateData(this.stepData._id,this.stepData):await this.ui.indexedDb.addData(this.stepData),await this.ui.savedStepUI.fetchData(),console.log(this.stepData),this.stepData=v,this.listTitle.value="",this.sidebarUl.innerHTML="",this.saveButton.disabled=!0,this.resumeButton.disabled=!0}catch(t){console.error(t)}}}class it{constructor(t,e,r=300,i=!1){o(this,"button");o(this,"container");o(this,"isCollapsed",!1);o(this,"animationDuration",300);o(this,"padding",{top:0,bottom:0});this.button=t,this.container=e,this.animationDuration=r,this.init(),i&&this.collapse()}init(){const t=window.getComputedStyle(this.container);this.padding.top=Math.ceil(parseFloat(t.paddingTop)),this.padding.bottom=Math.ceil(parseFloat(t.paddingBottom)),this.button.innerHTML=z,this.button.addEventListener("click",()=>this.toggleCollapse())}toggleCollapse(){this.isCollapsed?this.expand():this.collapse()}collapse(){this.isCollapsed=!0,this.button.title="Expand",this.container.setAttribute("style",`
      min-height: 0px !important; 
      padding-top: 0px; 
      padding-bottom: 0px; 
      overflow: hidden !important;
      `);const t=this.container.animate([{height:`${this.container.scrollHeight}px`},{height:"0px"}],{duration:this.animationDuration,easing:"ease",fill:"forwards"});t.onfinish=()=>{this.container.setAttribute("data-collapsed",`${this.isCollapsed}`),this.container.classList.remove("expanded"),t.cancel(),this.container.setAttribute("style",`
        height: 0px !important;
        min-height: 0px !important; 
        padding-top: 0px; 
        padding-bottom: 0px; 
        overflow: hidden !important;
        `)},this.button.innerHTML=V}expand(){this.isCollapsed=!1,this.button.title="Collapse";const t=this.container.clientHeight,e=this.container.scrollHeight+this.padding.top+this.padding.bottom;this.container.style.height=`${t}px`,this.container.style.overflow="hidden",this.container.setAttribute("data-collapsed",`${this.isCollapsed}`),this.container.classList.add("expanded");const r=this.container.animate([{height:`${t}px`},{height:`${e}px`}],{duration:this.animationDuration,easing:"ease",fill:"forwards"});r.onfinish=()=>{r.cancel()},this.button.innerHTML=z,r.onfinish=()=>{r.cancel(),this.container.style.height="auto",this.container.style.overflow="",this.container.style.minHeight="",this.container.style.paddingTop="",this.container.style.paddingBottom=""}}}class at{constructor(t,e,r,i=()=>{}){o(this,"container");o(this,"handle");o(this,"isDragging",!1);o(this,"offsetX",0);o(this,"offsetY",0);o(this,"shadowClass","!shadow-2xl");o(this,"name");o(this,"onDragStart");o(this,"onMouseDown",t=>{t.preventDefault(),this.onDragStart(this.container,this.name),this.isDragging=!0,this.offsetX=t.clientX-this.container.offsetLeft,this.offsetY=t.clientY-this.container.offsetTop,this.addElevationStyle()});o(this,"onMouseMove",t=>{this.isDragging&&requestAnimationFrame(()=>{this.container.style.left=`${t.clientX-this.offsetX}px`,this.container.style.top=`${t.clientY-this.offsetY}px`})});o(this,"onMouseUp",()=>{this.isDragging=!1,this.removeElevationStyle()});this.container=t,this.handle=e,this.name=r,this.onDragStart=i,this.handle.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}addElevationStyle(){this.container.style.transition="box-shadow 0.3s ease-in-out",this.container.classList.add("dragging",this.shadowClass),this.handle.classList.add("dragging","!cursor-grabbing")}removeElevationStyle(){this.container.classList.remove("dragging",this.shadowClass),this.handle.classList.remove("dragging","!cursor-grabbing"),this.container.style.transition="box-shadow 0.3s ease-in-out"}}class nt{constructor(t,e,r=()=>{},i=C){o(this,"ui");o(this,"container",C);o(this,"savedSidebarUl",F);o(this,"stepData",[]);o(this,"interval");o(this,"retryConnection",0);o(this,"name");o(this,"onContainerClick");this.container=i,this.ui=t,this.name=e,this.onContainerClick=r,this.init()}async init(){this.container.onclick=()=>{this.onContainerClick(this.container,this.name)};try{this.interval=setInterval(async()=>{if(this.retryConnection>10){alert("Database is not ready yet. Please try again later."),clearInterval(this.interval);return}this.ui.indexedDb.isDBReady?(console.log("DB is ready"),clearInterval(this.interval),await this.fetchData()):(this.retryConnection++,console.log("DB is not ready yet"))},1e3)}catch(t){console.error(t)}}renderStepData(){this.savedSidebarUl.innerHTML="",this.stepData.forEach(t=>{const e=G(t);e.onclick=()=>{var r;(r=this.ui.captureUI)==null||r.renderStepDataList(t),this.ui.tabs.showTabAtIndex(0)},c("button",{className:"btn btn-sm btn-square btn-error btn-outline !text-[var(--error)] border-[var(--inspector-border-color,gray)] hover:border-[var(--inspector-border-color,gray)]",innerHTML:A,title:"Delete Flow",onclick:r=>{r.preventDefault(),r.stopPropagation(),this.deleteStepData(t)}},e),this.savedSidebarUl.appendChild(e)})}async deleteStepData(t){try{await this.ui.indexedDb.deleteData(t._id),await this.fetchData()}catch(e){console.error(e)}}async fetchData(){if(!this.ui.indexedDb.isDBReady){alert("Database is not ready yet. Please try again later.");return}try{const t=await this.ui.indexedDb.getStoreData();return this.stepData=t,this.renderStepData(),t}catch(t){console.error(t)}}}const st=(n,t)=>c("button",{innerText:n,className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm 
        px-3 py-1.5 text-sm font-medium ring-offset-background transition-all 
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring 
        focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 
        dark:data-[state=active]:bg-[var(--inspector-active-list-bg)] data-[state=active]:bg-white dark:data-[state=active]:text-white data-[state=active]:shadow-sm`},t);class ct{constructor({tabs:t,container:e,tabButtonContainer:r}){o(this,"tabs");o(this,"tabButtons",[]);o(this,"container");o(this,"tabButtonContainer");this.tabs=t,this.container=e,this.tabButtonContainer=r,this.init()}init(){for(let t=0;t<this.tabs.length;t++){const e=this.tabs[t],r=st(e.title,this.tabButtonContainer);this.tabButtons.push(r),r.onclick=()=>this.showTabAtIndex(t)}this.showTabAtIndex(0)}showTabAtIndex(t){for(let e=0;e<this.tabs.length;e++){const r=this.tabs[e],i=this.tabButtons[e];e===t?(r.container.style.display="block",i.setAttribute("data-state","active"),i.classList.add("shadow-md")):(r.container.style.display="none",i.removeAttribute("data-state"),i.classList.remove("shadow-md"))}}}const lt=window.location.host,dt=`${lt}-step-data`,pt="steps",ht=`*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.collapse{visibility:collapse}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.-bottom-\\[18px\\]{bottom:-18px}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-\\[1305\\]{z-index:1305}.z-\\[2\\]{z-index:2}.z-\\[9999\\]{z-index:9999}.m-3{margin:.75rem}.\\!my-\\[9px\\]{margin-top:9px!important;margin-bottom:9px!important}.mx-auto{margin-left:auto;margin-right:auto}.\\!ml-auto{margin-left:auto!important}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.ml-auto{margin-left:auto}.mr-2{margin-right:.5rem}.mr-auto{margin-right:auto}.mt-4{margin-top:1rem}.line-clamp-1{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.max-h-\\[calc\\(100vh-200px\\)\\]{max-height:calc(100vh - 200px)}.max-h-\\[calc\\(100vh-456px\\)\\]{max-height:calc(100vh - 456px)}.min-h-\\[50px\\]{min-height:50px}.w-full{width:100%}.min-w-\\[300px\\]{min-width:300px}.max-w-\\[300px\\]{max-width:300px}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\!cursor-grab{cursor:grab!important}.\\!cursor-grabbing{cursor:grabbing!important}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-\\[1fr\\]{grid-template-columns:1fr}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-y-auto{overflow-y:auto}.overscroll-contain{overscroll-behavior:contain}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.125rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-\\[var\\(--inspector-border-color\\)\\]{border-color:var(--inspector-border-color)}.border-\\[var\\(--inspector-border-color\\,gray\\)\\]{border-color:var(--inspector-border-color,gray)}.border-red-500{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity))}.bg-\\[\\#0f172a\\]{--tw-bg-opacity: 1;background-color:rgb(15 23 42 / var(--tw-bg-opacity))}.bg-\\[\\#f2f2f2\\]{--tw-bg-opacity: 1;background-color:rgb(242 242 242 / var(--tw-bg-opacity))}.bg-\\[var\\(--inpector-card-bg\\)\\]{background-color:var(--inpector-card-bg)}.bg-\\[var\\(--inspector-list-bg\\)\\]{background-color:var(--inspector-list-bg)}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.p-1{padding:.25rem}.p-3{padding:.75rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pb-2{padding-bottom:.5rem}.text-center{text-align:center}.\\!text-\\[20px\\]{font-size:20px!important}.text-\\[20px\\]{font-size:20px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.font-semibold{font-weight:600}.\\!text-\\[var\\(--error\\)\\]{color:var(--error)!important}.text-\\[var\\(--inpector-sidebar-header-title-color\\)\\]{color:var(--inpector-sidebar-header-title-color)}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.\\!shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25) !important;--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color) !important;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)!important}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.inspector-capture-container{color-scheme:light}.inspector-capture-container.dark{color-scheme:dark}.inspector-capture-container{--inpector-card-bg: white;--inpector-sidebar-item-bg: #1d232a;--inpector-text-color: #ffffff;--inspector-border-color: rgb(236, 233, 233);--inspector-gap: 8px;--disabled-button-bg: rgb(213, 213, 213);--error-t: white;--error: #ff5861;--success: #00a96e;--success-t: white;--neutral: rgb(35, 42, 51);--neutral-text: white;--inspector-list-bg: #f2f2f2;--inspector-list-item-bg: #f2f2f2;--inspector-active-list-bg: #dcdddf}.inspector-capture-container.dark{--inpector-card-bg: #28292d;--inpector-sidebar-item-bg: #1d232a;--inpector-text-color: #ffffff;--inspector-border-color: #374151;--inspector-gap: 8px;--disabled-button-bg: rgb(213, 213, 213);--error: #ff5861;--error-t: white;--success: #00a96e;--success-t: white;--neutral: #000;--neutral-text: white;--inspector-list-bg: #4a4a50;--inspector-list-item-bg: #0a0a0a;--inspector-active-list-bg: #1b1b1b}.inspector-capture-container dialog:-internal-dialog-in-top-layer::backdrop{backdrop-filter:blur(1px);-webkit-backdrop-filter:blur(1px);background-color:#ffffff4d}.inspector-capture-container.dark *{color:#fff}.inspector-capture-container.dark input:focus,.inspector-capture-container.dark input:focus-visible,.inspector-capture-container.dark input:focus-within,.inspector-capture-container.dark textarea:focus,.inspector-capture-container.dark textarea:focus-visible,.inspector-capture-container.dark textarea:focus-within{outline:2px solid var(--inspector-border-color)!important}.inspector-capture-container.dark dialog:-internal-dialog-in-top-layer::backdrop{background-color:#0009}.inspector-capture-container .card{background-color:var(--inpector-card-bg)}.inspector-capture-container .card *{border-color:var(--inspector-border-color)}.inspector-capture-container .btn{display:inline-flex;height:3rem;min-height:3rem;flex-shrink:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-wrap:wrap;align-items:center;justify-content:center;border-radius:var(--rounded-btn, .5rem);border-color:transparent;border-color:var(--inspector-border-color);padding-left:1rem;padding-right:1rem;text-align:center;font-size:.875rem;line-height:1em;gap:.5rem;font-weight:600;text-decoration-line:none;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1);border-width:var(--border-btn, 1px);transition-property:color,background-color,border-color,opacity,box-shadow,transform;--tw-text-opacity: 1;color:var(--fallback-bc, oklch(var(--bc)/var(--tw-text-opacity)));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);outline-color:var(--fallback-bc, oklch(var(--bc)/1));background-color:oklch(var(--btn-color, var(--b2))/var(--tw-bg-opacity));--tw-bg-opacity: 1;--tw-border-opacity: 1}.inspector-capture-container button,.inspector-capture-container [role=button]{cursor:pointer}.inspector-capture-container button,.inspector-capture-container input:where([type=button]),.inspector-capture-container input:where([type=reset]),.inspector-capture-container input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}.inspector-capture-container .btn-sm{height:2rem;min-height:2rem;padding-left:.75rem;padding-right:.75rem;font-size:.875rem}.inspector-capture-container .btn.btn-disabled,.inspector-capture-container .btn[disabled],.inspector-capture-container .btn:disabled{--tw-border-opacity: 0;background-color:var(--disabled-button-bg, oklch(var(--n)/var(--tw-bg-opacity)));--tw-bg-opacity: .2;--tw-text-opacity: .2;opacity:.5;pointer-events:none}.inspector-capture-container .btn-neutral:not(.btn-outline){background-color:var(--neutral);color:var(--neutral-text)}.inspector-capture-container .btn-neutral.btn-outline{border-color:var(--neutral)}.inspector-capture-container .btn-success:not(.btn-outline){background-color:var(--success)!important;color:var(--success-t)!important}.inspector-capture-container .btn-success.btn-outline{border-color:var(--success)!important}.inspector-capture-container .btn-error.btn-outline{border-color:var(--error)!important}.inspector-capture-container .btn-error:not(.btn-outline){background-color:var(--error)!important;color:var(--error-t)}.inspector-capture-container .btn-error.btn-outline{border-color:var(--error)}.inspector-capture-container .card-actions{display:flex;gap:var(--inspector-gap)}.inspector-capture-container .modal-open,.inspector-capture-container .modal:target,.inspector-capture-container .modal-toggle:checked+.modal,.inspector-capture-container .modal[open]{pointer-events:auto;visibility:visible;opacity:1}.inspector-capture-container .modal{display:flex;align-items:center;pointer-events:none;position:fixed;top:0;right:0;bottom:0;left:0;margin:0;display:grid;height:100%;max-height:none;width:100%;max-width:none;justify-items:center;padding:0;opacity:0;overscroll-behavior:contain;z-index:999;background-color:transparent;color:inherit;transition-duration:.2s;transition-timing-function:cubic-bezier(0,0,.2,1);transition-property:transform,opacity,visibility;overflow-y:hidden}.inspector-capture-container .modal-open .modal-box,.inspector-capture-container .modal-toggle:checked+.modal .modal-box,.inspector-capture-container .modal:target .modal-box,.inspector-capture-container .modal[open] .modal-box{--tw-translate-y: 0px;--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.inspector-capture-container .modal-box{max-height:calc(100vh - 5em);grid-column-start:1;grid-row-start:1;width:91.666667%;max-width:32rem;--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-bottom-right-radius:var(--rounded-box, 1rem);border-bottom-left-radius:var(--rounded-box, 1rem);border-top-left-radius:var(--rounded-box, 1rem);border-top-right-radius:var(--rounded-box, 1rem);--tw-bg-opacity: 1;background-color:var(--inpector-card-bg);padding:1.5rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);transition-duration:.2s;box-shadow:#00000040 0 25px 50px -12px;overflow-y:auto;overscroll-behavior:contain}.inspector-capture-container .modal-action{display:flex;margin-top:1.5rem;gap:var(--inspector-gap);justify-content:flex-end}.inspector-capture-container .input{flex-shrink:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:3rem;padding-left:1rem;padding-right:1rem;font-size:1rem;line-height:2;line-height:1.5rem;border-radius:var(--rounded-btn, .5rem);border-width:1px;border-color:transparent;--tw-bg-opacity: 1;background-color:var(--fallback-b1, oklch(var(--b1)/var(--tw-bg-opacity)))}.inspector-capture-container .input-bordered{border-color:var(--inspector-border-color, oklch(var(--bc)/.2))}.inspector-capture-container .input:has(>input[disabled]),.inspector-capture-container .input-disabled,.inspector-capture-container .input:disabled,.inspector-capture-container .input[disabled]{cursor:not-allowed;border-color:var(--inspector-border-color, oklch(var(--bc)/.2));background-color:var(--fallback-b2, oklch(var(--b2)/var(--tw-bg-opacity)));color:var(--fallback-bc, oklch(var(--bc)/.4));opacity:.7}.inspector-capture-container .textarea{min-height:3rem;flex-shrink:1;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;line-height:2;border-radius:var(--rounded-btn, .5rem);border-width:1px;border-color:transparent;--tw-bg-opacity: 1;background-color:var(--fallback-b1, oklch(var(--b1)/var(--tw-bg-opacity)))}.inspector-capture-container .textarea-bordered{border-color:var(--inspector-border-color, oklch(var(--bc)/.2))}.inspector-capture-container .menu{background-color:var(--inspector-list-bg);border-radius:8px;margin:0;padding-block:5px}.inspector-capture-container .menu>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse));--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse));border-color:var(--inspector-border-color)}.inspector-capture-container .menu li{background-color:var(--inspector-list-item-bg);transition:background-color .3s;border-radius:8px;padding:5px 8px;display:flex;gap:4px;align-items:center;justify-content:space-between}.inspector-capture-container .menu li a{flex-grow:1}.inspector-capture-container .menu li:hover{background-color:var(--inspector-active-list-bg)}.inspector-capture-container label{display:block}.inspector-capture-container *[data-collapsed=true]{border-radius:.375rem}.inspector-capture-container .capture-sidebar-item:last-child .step-arrow{display:none}.inspector-capture-container .editableInput{width:100%;border-color:var(--inspector-border-color);background-color:transparent;border-radius:.25rem;border-width:1px}.inspector-capture-container .editableInput:focus,.inspector-capture-container .editableInput:focus-within,.inspector-capture-container .editableInput:focus-visible{outline:2px solid var(--inspector-border-color)}.hover\\:border-\\[var\\(--inspector-border-color\\,gray\\)\\]:hover{border-color:var(--inspector-border-color,gray)}.focus-visible\\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.disabled\\:pointer-events-none:disabled{pointer-events:none}.disabled\\:opacity-50:disabled{opacity:.5}.data-\\[state\\=active\\]\\:bg-white[data-state=active]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.data-\\[state\\=active\\]\\:shadow-sm[data-state=active]{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 640px){.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 768px){.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 1024px){.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width: 1280px){.xl\\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}}@media (min-width: 1536px){.\\32xl\\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}}.dark\\:border-gray-800:where(.dark,.dark *){--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity))}.dark\\:bg-\\[var\\(--inspector-list-bg\\)\\]:where(.dark,.dark *){background-color:var(--inspector-list-bg)}.dark\\:bg-green-900:where(.dark,.dark *){--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.dark\\:bg-slate-800:where(.dark,.dark *){--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity))}.dark\\:bg-slate-950:where(.dark,.dark *){--tw-bg-opacity: 1;background-color:rgb(2 6 23 / var(--tw-bg-opacity))}.dark\\:text-white:where(.dark,.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.dark\\:data-\\[state\\=active\\]\\:bg-\\[var\\(--inspector-active-list-bg\\)\\][data-state=active]:where(.dark,.dark *){background-color:var(--inspector-active-list-bg)}.dark\\:data-\\[state\\=active\\]\\:text-white[data-state=active]:where(.dark,.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}
`;class ut{constructor(t){o(this,"inspector");o(this,"captureUI");o(this,"savedStepUI");o(this,"indexedDb");o(this,"card",E);o(this,"cardHeader",y);o(this,"container",f);o(this,"tabButtonContainer",Y);o(this,"collapseButton",X(y));o(this,"cardHandle",K(y));o(this,"tabs");o(this,"host",null);this.inspector=t,this.indexedDb=new q({storeName:pt,uniqueKey:"_id",dbName:dt,version:4}),this.captureUI=new ot(this,"captureUI"),this.savedStepUI=new nt(this,"savedStepUI"),this.init()}init(){new at(this.card,this.cardHandle,"UI"),new it(this.collapseButton,this.container);const t=[{title:"Capture",container:this.captureUI.container},{title:"Saved",container:this.savedStepUI.container}];this.tabs=new ct({tabs:t,container:this.container,tabButtonContainer:this.tabButtonContainer})}injectShadowDOM(t,e){this.host=c("div",{className:"shadow-dom",id:"shadow-dom-container"});const r=this.host.attachShadow({mode:"open"}),i=document.createElement("style");i.textContent=`
    :host {
      all: initial;
    }
    #shadow-dom-container {
        all: initial;
    }
    *{
      color: black;
    }
    ${t}`,r.appendChild(i),r.appendChild(e),document.body.appendChild(this.host)}show(){this.injectShadowDOM(ht,w)}hide(){try{this.host&&document.body.removeChild(this.host)}catch{}}}class bt{constructor(t,e,r){o(this,"inspector");o(this,"hoverElement");o(this,"isHoverElementAddedToDOM");o(this,"targetElement");o(this,"targetElementData");o(this,"highlightColor");o(this,"falseHighlightColor");this.inspector=t,this.isHoverElementAddedToDOM=!1,this.createHoverElement(),this.highlightColor=e,this.falseHighlightColor=r}createHoverElement(){this.hoverElement=this.createElement("div",{className:"inspector-hover-element border-2 border-red-500 fixed z-[1305]"}),this.hoverElement.style.position="fixed",this.hoverElement.style.pointerEvents="none",this.hoverElement.style.zIndex="1305"}addElementToDom(){this.isHoverElementAddedToDOM||(this.isHoverElementAddedToDOM=!0,document.body.appendChild(this.hoverElement))}removeElementFromDom(){this.isHoverElementAddedToDOM&&(this.isHoverElementAddedToDOM=!1,document.body.removeChild(this.hoverElement))}getSelector(t){var r,i;if(!t)return null;if(t.id)return"#"+t.id;const e=t.parentElement;if(e!=null&&e.id)return`#${e.id}`;if(t.className){const a=`.${(i=(r=t==null?void 0:t.className)==null?void 0:r.split)==null?void 0:i.call(r," ").join(".")}`;return this.escapeTailwindClassNames(a)}}escapeTailwindClassNames(t){return t.replace(/[^a-zA-Z0-9-_.]/g,"\\$&")}getElementData(t){if(!t)return null;const e=t.tagName.toLowerCase(),r=t.getBoundingClientRect(),i=this.getSelector(t),a=Array.from(t.attributes).reduce((s,l)=>(s[l.name]=l.value,s),{});return{tag:e,attributes:a,selector:i,htmlBox:r,element:t,success:!0}}highlightElement(){let t=this.highlightColor,e="blue";if(this.targetElementData){this.targetElementData.success=!0;try{const s=this.getElementDataFromSelector(this.targetElementData.selector);(!s||(s==null?void 0:s.element)!==this.targetElement)&&(t=this.falseHighlightColor,e="red",this.targetElementData.success=!1)}catch(s){console.warn(s),this.targetElementData.success=!1,e="red",t=this.falseHighlightColor}const i=getComputedStyle(this.targetElement).getPropertyValue("border-radius"),{htmlBox:a}=this.targetElementData;this.hoverElement.style.border=`2px dashed ${e}`,this.hoverElement.style.borderRadius=i,this.hoverElement.style.left=a.left+"px",this.hoverElement.style.top=a.top+"px",this.hoverElement.style.width=a.width+"px",this.hoverElement.style.height=a.height+"px",this.hoverElement.style.backgroundColor=t}}getElementDataFromSelector(t){if(!t)return null;const e=document.querySelector(t);return e?this.getElementData(e):null}createElement(t,e){const r=document.createElement(t);return e&&Object.assign(r,e),r}update(){if(!this.targetElement)return;const t=this.getElementData(this.targetElement);t&&(this.targetElementData=t)}render(){this.highlightElement()}}class mt{constructor(t,e,r=3,i=""){o(this,"inspector");o(this,"countdownInSeconds");o(this,"elements");o(this,"countDown");o(this,"messageContainer");o(this,"counterElement");o(this,"interval");o(this,"timeout");o(this,"isChildPresent",!1);o(this,"messageElement");o(this,"startMessage");this.inspector=t,this.countdownInSeconds=r,this.countDown=r,this.elements=e,this.messageContainer=e.createElement("div"),this.counterElement=e.createElement("h2"),this.messageElement=e.createElement("p",{innerText:"To exit the inspector tool at any time, simply press the Esc key."}),this.startMessage=i,this.init()}init(){this.messageContainer.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(0, 0, 0, 0.5);
      max-width: 100vw;
      backdrop-filter: blur(10px);
      padding: 50px;
      border-radius: 10px;
      text-align: center;
      color: white;
    `,this.counterElement.style.cssText=`
      font-size: 24px;
      font-weight: bold;
      
    `,this.messageElement.style.cssText=`
      max-width: 300px;
      margin: 15px auto;
      font-size: 18px;
    `;const t=this.elements.createElement("span",{innerText:this.startMessage});this.messageElement.appendChild(t),this.messageContainer.appendChild(this.counterElement),this.messageContainer.appendChild(this.messageElement)}clear(){clearInterval(this.interval),clearTimeout(this.timeout),this.countDown=this.countdownInSeconds,this.isChildPresent&&document.body.removeChild(this.messageContainer)}showCountdown(t){this.counterElement.textContent=this.countDown.toString(),document.body.appendChild(this.messageContainer),this.isChildPresent=!0,this.interval=setInterval(()=>{this.countDown--,this.counterElement.textContent=this.countDown.toString()},1e3),this.timeout=setTimeout(()=>{document.body.removeChild(this.messageContainer),this.isChildPresent=!1,this.countDown=this.countdownInSeconds,t()},this.countdownInSeconds*1e3)}}class gt{constructor({onElementClick:t,update:e,startMessage:r="",countdownTimeInSeconds:i=3,highlightColor:a="rgba(0,0,255,0.3)",falseHighlightColor:s="rgba(255, 0, 0, 0.3)"}){o(this,"isInspecting");o(this,"boundKeydown");o(this,"boundMousedown");o(this,"boundMouseOver");o(this,"boundContextMenu");o(this,"elements");o(this,"isListenerAttached");o(this,"onElementClick");o(this,"updateFN");o(this,"messages");o(this,"ui");this.isListenerAttached=!1,this.isInspecting=!1,this.elements=new bt(this,a,s),this.onElementClick=t,this.updateFN=e,this.messages=new mt(this,this.elements,i,r),this.ui=new ut(this)}show(){this.ui.show()}hide(){this.ui.hide()}addEventListeners(){this.isListenerAttached||(this.isListenerAttached=!0,this.boundKeydown=this.handleKeydown.bind(this),this.boundMousedown=this.handleMouseDown.bind(this),this.boundMouseOver=this.handleMouseOver.bind(this),this.boundContextMenu=this.handleContextMenu.bind(this),document.addEventListener("keydown",this.boundKeydown),document.addEventListener("mousedown",this.boundMousedown),document.addEventListener("mouseover",this.boundMouseOver),document.addEventListener("contextmenu",this.boundContextMenu))}removeEventListeners(){this.isListenerAttached&&(this.isListenerAttached=!1,document.removeEventListener("keydown",this.boundKeydown),document.removeEventListener("mousedown",this.boundMousedown),document.removeEventListener("mouseover",this.boundMouseOver),document.removeEventListener("contextmenu",this.boundContextMenu))}handleKeydown(t){t.key==="Escape"&&this.stopCapturing(),t.key===""&&t.altKey&&t.ctrlKey&&(this.isInspecting?this.stopCapturing():this.startCapturing())}handleMouseDown(t){t.preventDefault(),t.stopPropagation(),this.isInspecting&&(t.preventDefault(),t.stopPropagation(),this.onElementClick&&typeof this.onElementClick=="function"&&this.onElementClick(t,this.elements.targetElementData))}handleMouseOver(t){if(!this.isInspecting)return;const e=t.target;this.elements.targetElement=e}handleContextMenu(t){this.isInspecting&&(t.preventDefault(),t.stopPropagation())}pause(){this.stopCapturing()}resume(){this.addEventListeners(),this.isInspecting=!0,this.elements.addElementToDom(),requestAnimationFrame(t=>this.animate(t))}stopCapturing(){this.elements.removeElementFromDom(),this.isInspecting=!1,this.removeEventListeners(),this.messages.clear()}startCapturing(){const t=()=>{this.addEventListeners(),this.isInspecting=!0,this.elements.addElementToDom(),window.requestAnimationFrame(e=>this.animate(e))};this.messages.showCountdown(t)}animate(t){this.isInspecting&&(this.update(t),this.render(),requestAnimationFrame(this.animate.bind(this)))}update(t){this.elements.update(),this.updateFN&&typeof this.updateFN=="function"&&this.updateFN(t)}render(){this.elements.render()}}class wt{constructor(){o(this,"inspector",new gt({}))}start(){this.inspector.show()}stop(){this.inspector.hide()}async getAllData(){var t;try{return await((t=this.inspector)==null?void 0:t.ui.indexedDb.getStoreData())}catch(e){console.error(e)}}}const D=n=>{chrome.runtime.sendMessage({action:"messageFromContent",data:n},function(t){t&&console.log(t)})},x=new wt;var T,H;(H=(T=chrome.runtime)==null?void 0:T.onMessage)==null||H.addListener(async(n,t,e)=>{if(n.action==="start"&&(x.start(),D({response:"started",data:[]})),n.action==="stop"&&(x.stop(),D({response:"stoped",data:[]})),n.action==="sendStepData"){x.stop();const r=await x.getAllData();D({response:"data",data:r})}if(n.action==="changeTheme"){const{theme:r}=n;if(!w)return;w.className=`inspector-capture-container ${r}`}});
